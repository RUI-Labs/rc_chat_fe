import{Y as X,G as $,V as ee,h as te,S as ae,t as L}from"./index.BUh_L0Ny.js";import{$ as f,a as j,b as k,c as q,s as O}from"./stamp.DRRuyw06.js";import{B as se}from"./index.DUM513om.js";import oe from"./NewStamper.BKDc7L3s.js";import{S as le}from"./StampCircle.DyuAEC7d.js";import{b as Y}from"./index.LclF5nvU.js";import{_ as ne}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{g as A,r as a,o as G,j as H,s as y,a as n,c as r,d as t,h as u,i as p,n as D,l as J,t as B,f as M}from"./runtime-core.esm-bundler.C8n-v3-D.js";import"./index.SVBtah2_.js";import"./wagmiConfig.Chk1Y_fx.js";import"./getAccount.CrAKNmNJ.js";import"./getEthersSigner.DIrFHjWe.js";import"./getConnectorClient.CvN7nnx2.js";import"./inherits_browser.BGXtg88A.js";import"./supabase.Cq5c-OsS.js";import"./utils.CFP4Y51R.js";import"./runtime-dom.esm-bundler.CkxCeCJQ.js";import"./DialogFooter.DtzIYxse.js";import"./createLucideIcon.CCYx18s6.js";import"./Input.z9xLTbiq.js";import"./watchConnections.CEVD3vQ5.js";import"./disconnect.fQnpZ0pp.js";const re={__name:"Modal",props:["project_info","campaign_info"],setup(E,{expose:s}){s();const w=E,{project_info:e,campaign_info:v}=A(w),l=a(!1),i=()=>{l.value=!l.value,l.value&&(console.log("view view view"),_.value&&setTimeout(()=>{l.value=!1},1e3))},P=a(),z=a(),_=a(!1);G(()=>{const o=window.location.search,h=new URLSearchParams(o).get("campaign");console.log("urlCampaign",h),v.value?.id==h&&i(),f.subscribe(()=>{console.log("$userData.value",f.value),P.value=f.value?.wallet_address,z.value=f.value?.name;const C=f.value?.stamps.find(Z=>Number(Z.campaign_id)===Number(h));C&&(j.set(!0),k.set(C.url),setTimeout(()=>{l.value=!1},1e3),x.value=!1,R(),_.value=C)})});const c=a(null),I=a(null),b=a(!1),{x:T,y:N,isOutside:g}=Y(I),S=a(!0),K=o=>{S.value=o},Q=H(()=>d.value?!1:!S.value),d=a(!1);y(T,o=>{d.value||c.value!=null&&(g.value?c.value.style.left=`${o}px`:c.value.style.left=`${o-150}px`)}),y(N,o=>{d.value||c.value!=null&&(g.value?c.value.style.top=`${o}px`:c.value.style.top=`${o-150}px`)}),y(g,()=>{d.value||(b.value=!g.value)});const x=a(!0),V=a(null),U=a(null),W=()=>{if(x.value||_.value)return;q(e.value,v.value),d.value=!0,b.value=!0;let o=document.getElementById("mainCard");L(o).then(async m=>{var h=new Image;h.src=m,V.value=m,k.set(m),j.set(!0),await O(e.value,v.value),l.value=!1}).catch(function(m){console.error("oops, something went wrong!",m)})},R=()=>{x.value=!1},F={props:w,project_info:e,campaign_info:v,open:l,toggleModal:i,address:P,name:z,stampFound:_,stampEl:c,stampzoneEl:I,zoomStamp:b,x:T,y:N,isOutside:g,isOutsideChatBubble:S,updateChatBubblePos:K,hideStamp:Q,stampStop:d,noStamp:x,stampedCardImage:V,stampCircleEl:U,confirmStamp:W,updateStamp:R,ref:a,onMounted:G,toRefs:A,get Dialog(){return X},get DialogPanel(){return $},get DialogTitle(){return ee},get TransitionChild(){return te},get TransitionRoot(){return ae},get toPng(){return L},get $receiptImageData(){return k},get $showReceipt(){return j},get $userData(){return f},get confirmStampAndSendMessage(){return q},get sendImage(){return O},watch:y,computed:H,get Button(){return se},NewStamper:oe,StampCircle:le,get useMouseInElement(){return Y}};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},ie=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),ce={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},ue={class:"flex items-end justify-center text-center"},de={key:0,id:"mainCard",class:"w-full h-full min-h-full flex flex-col justify-center items-center bg-white relative"},me={class:"w-full flex justify-start items-center p-2 absolute top-4 left-4"},fe=t("iconify-icon",{class:"text-xl mr-4",icon:"ep:back"},null,-1),pe={class:"w-full grid grid-cols-3 justify-center items-center"},ve={class:"p-4 px-8 col-span-2 relative h-full"},ge={class:"text-8xl font-brand font-semibold leading-[8rem] mb-12 text-left"},he={class:"flex justify-start items-center space-x-4"},_e=t("p",{class:"text-3xl"},"You're invited by",-1),xe={class:"bg-blue-500 rounded-full p-3 text-4xl flex justify-start items-center pr-6"},ye=t("div",{class:"h-16 aspect-square bg-white rounded-full mr-2"},null,-1),we={class:"text-white"},be={key:0,class:"w-full fixed bottom-0 left-0 flex flex-col justify-start items-start p-8"},Se={class:"flex space-x-4 justify-start items-start"},Ce=t("div",{class:"flex justify-center items-center text-3xl bg-yellow-400/20 text-yellow-700 p-4 rounded-full"},[t("iconify-icon",{icon:"ic:round-warning"}),J(" Â  "),t("div",null,"You don't have a stamp!")],-1),je={class:"flex justify-center items-center"},ke=t("button",{class:"text-white bg-blue-500 rounded-xl px-8 py-4 hover:bg-blue-500 hover:text-white hover:border-blue-500 hover:ring-8 hover:ring-offset-4 duration-300 active:scale-90 text-3xl"},"Create my Stamp (Free)",-1),De={key:0,ref:"stampCircleEl"},Be={class:"w-full flex justify-center items-center p-12 pr-24 h-full"},Me={key:0},Ee={key:1,xmlns:"http://www.w3.org/2000/svg",width:"10rem",height:"10rem",viewBox:"0 0 24 24"},Pe=t("path",{fill:"white",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59z"},null,-1),ze=[Pe],Ie=["src"];function Te(E,s,w,e,v,l){return n(),r("div",null,[t("button",{onClick:s[0]||(s[0]=i=>e.toggleModal()),class:"bg-blue-50 text-blue-500 p-2 px-4 rounded-xl duration-300 hover:scale-90 hover:ring-2 hover:ring-blue-100 hover:ring-offset-2 active:scale-75"},"View"),u(e.TransitionRoot,{as:"template",show:e.open},{default:p(()=>[u(e.Dialog,{class:"relative z-10",onClose:s[4]||(s[4]=i=>e.open=!1)},{default:p(()=>[u(e.TransitionChild,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[ie]),_:1}),t("div",ce,[t("div",ue,[u(e.TransitionChild,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[u(e.DialogPanel,{class:D([[e.stampStop?"bg-white/20":"bg-white"],"relative transform overflow-hidden rounded-lg shadow-xl transition-all w-screen h-screen"])},{default:p(()=>[e.stampFound?(n(),r("img",{key:1,src:e.stampFound?.url},null,8,Ie)):(n(),r("main",de,[t("div",me,[t("button",{onClick:s[1]||(s[1]=i=>e.toggleModal()),class:"p-2 px-6 text-xl bg-gray-200 rounded-xl mb-12 flex justify-center items-center duration-300 hover:scale-90 hover:ring-4 hover:ring-gray-100 hover:ring-offset-4"},[fe,J(" Back ")])]),t("div",pe,[t("div",ve,[t("h1",ge,B(e.campaign_info.message),1),t("div",he,[_e,t("div",xe,[ye,t("div",we,B(e.project_info.token_name),1)])]),t("div",null,[e.noStamp?(n(),r("div",be,[t("div",Se,[Ce,t("div",je,[u(e.NewStamper,{onUpdate:s[2]||(s[2]=i=>e.updateStamp())},{default:p(()=>[ke]),_:1})])])])):(n(),r("div",{key:1,ref:"stampEl",class:D([[e.zoomStamp?"scale-100":"scale-75","duration-300 transition-transform"],"w-[300px] h-[300px] fixed z-40 bottom-0 left-0 pointer-events-none"])},[e.hideStamp?M("",!0):(n(),r("div",De,[t("p",null,B(e.$userData?.wallet_address),1),u(e.StampCircle,{address:e.address,name:e.name},null,8,["address","name"])],512))],2))])]),t("div",Be,[t("div",{style:{cursor:"none"},ref:"stampzoneEl",onClick:s[3]||(s[3]=i=>e.confirmStamp()),class:D([[e.stampStop?"bg-green-500 text-white":"hover:opacity-50"],"w-full aspect-square border rounded-full flex justify-center items-center text-xl"])},[e.stampStop?M("",!0):(n(),r("p",Me,"Stamp Here to Participate")),e.stampStop?(n(),r("svg",Ee,ze)):M("",!0)],2)])])]))]),_:1},8,["class"])]),_:1})])])]),_:1})]),_:1},8,["show"])])}const st=ne(re,[["render",Te]]);export{st as default};
