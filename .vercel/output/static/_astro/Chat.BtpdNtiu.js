import{w as st,v as Xt}from"./runtime-dom.esm-bundler.CkxCeCJQ.js";import{a as pe,i as Et,g as _t,b as yt,c as it,p as Je,m as lt}from"./index.SVBtah2_.js";import{g as Qt,p as Zt,c as ea,l as Ct,L as nt,s as St,a as ta}from"./getEthersSigner.DIrFHjWe.js";import{c as L,m as aa,h as na}from"./wagmiConfig.Chk1Y_fx.js";import{s as $t}from"./supabase.Cq5c-OsS.js";import{g as ne}from"./getAccount.CrAKNmNJ.js";import{b as Dt}from"./index.LclF5nvU.js";import{S as ct}from"./StampCircle.DyuAEC7d.js";import{Y as dt,G as ut,V as vt,h as ft,S as mt,t as kt}from"./index.BUh_L0Ny.js";import{_ as ve}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{g as Me,r as f,s as F,o as we,a as w,c as C,d as a,p as ge,h as D,i as P,F as Pe,n as Ee,f as V,t as ae,j as Z,w as oa,l as De,m as he,ad as ra,b as ye,S as J,u as je,Q as Rt,$ as sa,k as Nt,U as la,Z as ia,_ as ca,v as et,e as We,ak as da,al as ua}from"./runtime-core.esm-bundler.C8n-v3-D.js";import{I as Lt}from"./Input.z9xLTbiq.js";import{a as me}from"./anime.es.BNELU3II.js";import{c as Ae,r as Ye,g as Ie,w as Ge}from"./watchConnections.CEVD3vQ5.js";import{d as Xe}from"./disconnect.fQnpZ0pp.js";import{I as va,i as fa,m as ma,j as pa,x as Wt,c as Re,G as ga,g as ha,n as wa,h as ba,f as xa}from"./utils.CFP4Y51R.js";import{D as _a,a as ya,b as Ca,c as Sa,d as $a,e as Da}from"./DropdownMenuLabel.CcxHB94g.js";import{B as ka}from"./index.DUM513om.js";import{O as ot}from"./overlayscrollbars.BZdJ0bwW.js";import"./getConnectorClient.CvN7nnx2.js";import"./inherits_browser.BGXtg88A.js";const de=pe(null),xe=pe(null),le=pe(null),be=pe(null),_e=pe(null),ke=pe(!1),Qe=pe(""),Q=pe(null),rt={env:"production",disablePersistenceEncryption:!0},Ze=async()=>{let o=!1;if(Et()){let s=null;H.value?.private_xmtp_address?s=H.value.private_xmtp_address:s=Qt();const e=Zt(s),r=ea({account:e,chain:aa,transport:na()}),l=r.account.address;if(o=Ct(l),!o){o=await nt.getKeys(r,{...rt}),St(l,o);const n=ne(L);localStorage.setItem(`xmtp-wallet-${n.address.toLowerCase()}`,s),fetch("/api/contactbook.json",{method:"POST",body:JSON.stringify({wallet_address:n.address.toLowerCase(),xmtp_address:l.toLowerCase(),onesignal_subscription_id:_t(),private_xmtp_address:s,name:Qe.get(),cookie:yt()})})}}else{let s=await Bt();if(o=Ct(s.address),!o){o=await nt.getKeys(s,{...rt}),St(s.address,o);const e=ne(L);fetch("/api/contactbook.json",{method:"POST",body:JSON.stringify({wallet_address:e.address.toLowerCase(),xmtp_address:e.address.toLowerCase(),onesignal_subscription_id:_t(),private_xmtp_address:`private-${e.address.toLowerCase()}`,name:Qe.get(),cookie:yt()})})}}const t=await nt.create(null,{...rt,privateKeyOverride:o});t.registerCodec(new it),t.registerCodec(new Je),console.log("xmtp",t),Q.set(t)},Bt=async()=>{console.log("getting signer");let o=!1;try{o=await ta(L),console.log(o);let t=await o.provider.getSigner();console.log(t),o=t}catch(t){console.log(t)}if(o)return o;setTimeout(async()=>{await Bt()},1e3)},H=pe(null),Tt=async()=>{const o=ne(L);if(!o.address){H.set(null);return}const t=await fetch(`/api/wallet/${o.address.toLowerCase()}.json`,{method:"GET"}).then(s=>s.text()).then(s=>JSON.parse(s)).catch(s=>{console.log(s)});if(Et()&&t?.private_xmtp_address){const s=t.private_xmtp_address;localStorage.setItem(`xmtp-wallet-${o.address.toLowerCase()}`,s)}H.set(t),console.log("$userData",H.value)},ue=pe(!1),Ot=async(o,t)=>{const s=`campaign:${t?.id}`,e=await Q.value.conversations.newConversation(o.owner_address.toLowerCase());try{await e.send(s),ue.set(!ue.value)}catch{ue.set(!ue.value)}},Pt="https://ojvozirqgxgiztlmasrm.supabase.co",jt=async(o,t)=>{const s=`stamp:${o.token_address.toLowerCase()}:${t?.id}:${H.value.wallet_address.toLowerCase()}:${Date.now()}.png`,e=`enodedstamp:${o.token_address.toLowerCase()}:${t?.id}:${H.value.wallet_address.toLowerCase()}:${Date.now()}`,r="image/png",l=Ta(_e.value,s,r);console.log("imagefile",l);const n=await new Promise((i,p)=>{const v=new FileReader;v.onload=()=>{v.result instanceof ArrayBuffer?i(v.result):p(new Error("Not an ArrayBuffer"))},v.readAsArrayBuffer(l)});console.log("imagedata",n);const m={filename:s,mimeType:r,data:new Uint8Array(n)},_=await Je.encodeEncrypted(m,new it),[h,c]=await Promise.all([$t.storage.from("stamps").upload(s,l,{upsert:!0}),$t.storage.from("stamps").upload(e,_.payload,{upsert:!0})]),j=`${Pt}/storage/v1/object/public/${h.data.fullPath}`,y=`${Pt}/storage/v1/object/public/${c.data.fullPath}`;console.log("url",j),fetch("/api/uploadstamp.json",{method:"POST",body:JSON.stringify({url:j,encoded_url:y,wallet_address:H.value.wallet_address.toLowerCase(),campaign_id:t?.id,project_id:o.token_address.toLowerCase()})}).then(i=>i.text()).then(i=>JSON.parse(i)).catch(i=>{console.log(i)});const k={url:y,contentDigest:_.digest,salt:_.salt,nonce:_.nonce,secret:_.secret,scheme:"https://",filename:m.filename,contentLength:m.data.byteLength},T=await Q.value.conversations.newConversation(o.owner_address.toLowerCase());try{await T.send(k,{contentType:lt}),ue.set(!ue.value)}catch{ue.set(!ue.value)}},Ta=(o,t,s="image/jpg",e=512)=>{const r=atob(o.split(",")[1]),l=[];for(let _=0;_<r.length;_+=e){const h=r.slice(_,_+e),c=new Array(h.length);for(let y=0;y<h.length;y++)c[y]=h.charCodeAt(y);const j=new Uint8Array(c);l.push(j)}const n=new Blob(l,{type:s});return new File([n],`${t}.jpg`,{type:s})},Oa={__name:"Modal",props:["project_info","campaign_info"],emits:["stamped"],setup(o,{expose:t,emit:s}){t();const e=o,{project_info:r,campaign_info:l}=Me(e),n=f(!1),m=f(!0),_=f(null),h=()=>{console.log("open.value",n.value),n.value=!n.value,n.value||le.set(!1),n.value&&_.value&&setTimeout(()=>{n.value=!1,le.set(!1)},1e3)},c=()=>{de.set(!0),le.set(!1),n.value=!1},j=()=>{xe.set(!0),le.set(!1),n.value=!1},y=f(!1),k=f(!1),T=f(null),i=f(null),{x:p,y:v,isOutside:b}=Dt(T);F(p,I=>{k.value||i.value!=null&&(b.value?i.value.style.left=`${I}px`:i.value.style.left=`${I-150}px`)}),F(v,I=>{k.value||i.value!=null&&(b.value?i.value.style.top=`${I}px`:i.value.style.top=`${I-150}px`)}),F(b,()=>{k.value||(y.value=!b.value)});const x=s,A=()=>{if(m.value||_.value)return;k.value=!0,y.value=!0,Ot(r.value,be.value);let I=document.getElementById("mainCard");kt(I).then(async Y=>{var se=new Image;se.src=Y,_e.set(Y),ke.set(!0),await jt(r.value,be.value),n.value=!1,le.set(!1),x("stamped")}).catch(function(Y){console.error("oops, something went wrong!",Y)})};we(()=>{H.subscribe(()=>{H.value?.wallet_address&&(m.value=!1),u()}),be.subscribe(I=>{I&&u()}),le.subscribe(I=>{console.log("##");let Y=le.get();console.log("_value",Y),Y?n.value=!0:n.value=!1})});const u=()=>{const I=window.location.search,se=new URLSearchParams(I).get("campaign");console.log("urlCampaign",se);const ee=H.value?.stamps.find(G=>Number(G.campaign_id)===Number(be.value?.id));ee?(ke.set(!0),_e.set(ee.url),_.value=ee.url,setTimeout(()=>{le.set(!1)},1e3)):(ke.set(null),_e.set(null),_.value=null)},d={props:e,project_info:r,campaign_info:l,open:n,noStamp:m,stampedCardImage:_,toggleModal:h,showStampModal:c,showConnectWalletModal:j,zoomStamp:y,stampStop:k,stampzoneEl:T,stampEl:i,x:p,y:v,isOutside:b,emit:x,confirmStamp:A,checkStamp:u,ref:f,onMounted:we,toRefs:Me,watch:F,get Dialog(){return dt},get DialogPanel(){return ut},get DialogTitle(){return vt},get TransitionChild(){return ft},get TransitionRoot(){return mt},get $showNewStampModal(){return de},get $showWalletModal(){return xe},get $receiptImageData(){return _e},get $showReceipt(){return ke},get $userData(){return H},get confirmStampAndSendMessage(){return Ot},get sendImage(){return jt},get $showCampaignModal(){return le},get $selectedCampaign(){return be},get useMouseInElement(){return Dt},StampCircle:ct,get toPng(){return kt}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Pa=a("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),ja={class:"fixed inset-0 z-[52] w-screen h-screen overflow-y-auto"},Aa={class:"flex items-center justify-center text-center w-full h-full"},Ia={key:0,class:"flex flex-col text-2xl font-bold font-brand text-white justify-center items-center relative"},Ma=["src"],Ea=a("div",{class:"absolute bottom-[10vh]"}," You've participated ",-1),Ra={class:"w-full max-w-md bg-white relative rounded-xl"},Na=a("iconify-icon",{class:"text-xl",icon:"material-symbols:close"},null,-1),La=[Na],Wa={class:"p-8 mt-4"},Ba=a("p",{class:"mb-4"},"you're invited to join:",-1),za={class:"text-4xl font-brand font-bold"},Fa=a("div",{class:"px-8 text-center pb-2"},[a("p",{class:"text-xl"},"Please provide your stamp if you would like to participate.")],-1),Ua={class:"w-full flex justify-center items-center py-12"},Ha={key:0,class:"bg-black/40 w-full h-full absolute top-0 left-0 z-20 flex justify-center items-center backdrop-blur-sm flex-col"},qa=a("iconify-icon",{class:"text-white text-7xl",icon:"material-symbols:lock"},null,-1),Va=a("p",{class:"text-white mt-2"},"No stamp found!",-1),Ka=[qa,Va],Ja={key:1,class:"animate-bounce"},Ya=a("p",{class:"font-brand font-bold rotate-[-20deg] text-blue-500"},"Stamp Here!",-1),Ga=[Ya],Xa={key:2},Qa={key:0,xmlns:"http://www.w3.org/2000/svg",width:"10rem",height:"10rem",viewBox:"0 0 24 24"},Za=a("path",{fill:"white",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59z"},null,-1),en=[Za],tn={key:0,class:"p-4 space-y-2"};function an(o,t,s,e,r,l){return w(),C("div",null,[a("div",{onClick:t[0]||(t[0]=n=>e.toggleModal())},[ge(o.$slots,"default")]),D(e.TransitionRoot,{as:"template",show:e.open},{default:P(()=>[D(e.Dialog,{class:"relative z-[51]",onClose:t[5]||(t[5]=n=>e.open=!1)},{default:P(()=>[D(e.TransitionChild,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:P(()=>[Pa]),_:1}),a("div",ja,[a("div",Aa,[D(e.TransitionChild,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:P(()=>[D(e.DialogPanel,{id:"mainCard",class:"w-full h-full flex justify-center items-center relative"},{default:P(()=>[e.stampedCardImage?(w(),C("div",Ia,[a("img",{class:"object-contain rotate-6 scale-90",src:e.stampedCardImage,alt:""},null,8,Ma),Ea])):(w(),C(Pe,{key:1},[e.noStamp?V("",!0):(w(),C("div",{key:0,ref:"stampEl",class:Ee([[e.zoomStamp?"scale-100":"scale-75","duration-300 transition-transform"],"w-[300px] h-[300px] fixed z-40 bottom-0 left-0 pointer-events-none"])},[D(e.StampCircle,{address:e.$userData.value?.wallet_address,name:e.$userData.value?.name},null,8,["address","name"])],2)),a("section",Ra,[a("button",{onClick:t[1]||(t[1]=n=>e.toggleModal()),class:"absolute top-2 right-2 w-8 h-8 flex justify-center items-center bg-red-100 rounded-full active:scale-90 hover:bg-red-500 text-red-500 hover:text-white hover:ring-red-300 hover:ring-4 hover:ring-offset-4 duration-300"},La),a("div",Wa,[Ba,a("h1",za,ae(e.$selectedCampaign.value?.title),1)]),Fa,a("div",Ua,[a("div",{ref:"stampzoneEl",onClick:t[2]||(t[2]=n=>e.confirmStamp()),class:Ee(["w-[200px] aspect-square border flex justify-center items-center overflow-hidden relative cursor-pointer",[e.stampStop?"bg-green-500 rounded-full":"rounded-xl "]])},[e.noStamp?(w(),C("div",Ha,Ka)):V("",!0),e.stampStop?V("",!0):(w(),C("div",Ja,Ga)),e.stampStop?(w(),C("div",Xa,[e.stampStop?(w(),C("svg",Qa,en)):V("",!0)])):V("",!0)],2)]),e.noStamp?(w(),C("div",tn,[a("button",{onClick:t[3]||(t[3]=st(n=>e.showConnectWalletModal(),["stop"])),class:"bg-blue-100 w-full rounded-xl text-blue-500 py-4 font-brand font-semibold text-lg hover:ring-2 hover:ring-blue-500 hover:ring-offset-2 active:scale-75 duration-300"},"Already have Stamp?"),a("button",{onClick:t[4]||(t[4]=st(n=>e.showStampModal(),["stop"])),class:"bg-blue-500 w-full rounded-xl text-white py-4 font-brand font-semibold text-lg hover:ring-2 hover:ring-blue-500 hover:ring-offset-2 active:scale-75 duration-300"},"Get a Stamp (Free!)")])):V("",!0)])],64))]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const nn=ve(Oa,[["render",an]]),on={__name:"NewStamp",emits:["update"],setup(o,{expose:t,emit:s}){t();const e=f(0),r=f(!1),l=f(""),n=f(),m=f(),_=f();F(n,async u=>{let d=me.timeline({easing:"easeInOutQuad",duration:300});d.add({targets:"#text1-1",maxHeight:"3rem"}),d.add({targets:"#text1-2",maxHeight:"3rem",delay:200}),d.add({targets:"#text1-3",maxHeight:"30rem",delay:500,duration:600})}),F(m,async u=>{let d=me.timeline({easing:"easeInOutQuad",duration:300});d.add({targets:"#text1-5-wallet",opacity:1,translateY:30}),d.add({targets:"#text1-5-wallet",opacity:1,translateY:0}),d.add({targets:"#text1-5-1",maxHeight:"3rem",delay:100}),d.add({targets:"#text1-5-2",maxHeight:"3rem",delay:200}),d.add({targets:"#text1-5-wallet",rotate:360,scale:0,opacity:0}),d.add({targets:"#text1-5-tick",rotate:360,scale:1,opacity:1,easing:"spring(1, 80, 10, 0)"},"-=150"),d.add({targets:"#page1_5",scale:.9,opacity:0}),d.complete=()=>{e.value=2}}),F(_,async u=>{let d=me.timeline({easing:"easeInOutQuad",duration:300});console.log("page2",u),d.add({targets:"#page2",scale:1,opacity:1})}),we(()=>{de.subscribe(()=>{de.get()?h():c(),ne(L)?.address&&(e.value=1.5)})});const h=()=>{r.value=!0,e.value=1},c=()=>{e.value=1,de.set(!1),r.value=!1},j=async u=>{console.log("connectWallet");const d=Ie(L).find(I=>I.id===u);if(console.log(d),d)try{await Ae(L,{connector:d}),e.value=1.5}catch(I){console.log(I),alert(`Wallet fail to connect : ${I?.message}`)}else alert("No wallet found.")},y=async()=>{console.log("createWallet");const u=Ie(L).find(d=>d.id==="coinbaseWalletSDK");if(console.log(u),u)try{await Ae(L,{connector:u}),e.value=2}catch(d){console.log(d),alert(`Wallet fail to connect : ${d?.message}`)}else alert("Fail to create wallet. Please try again.")},k=()=>{Qe.set(l.value),e.value=3,Ze()},T=async()=>{e.value=3.5;try{await window.OneSignal.Notifications.requestPermission(),window?.OneSignal?.Notifications.permission?i():alert("Please allow notification push at your application.")}catch(u){console.info("allowNotification",u)}},i=async()=>{e.value=4},p=s,v=f(!1),b=async()=>{v.value||(v.value=!0,await new Promise(u=>{let d=setInterval(()=>{Q.value&&(clearInterval(d),u())},500)}),console.log(Q.value),p("update"),c(),v.value=!1)},x=Z(()=>ne(L)?.address),A={page:e,open:r,nameInput:l,page_1:n,page_1_5:m,page_2:_,show:h,hide:c,connectWallet:j,createWallet:y,confirmName:k,requestNotification:T,allowNotification:i,emit:p,isBusy:v,completeStamp:b,connectedWalletAddress:x,onMounted:we,ref:f,watch:F,computed:Z,get Dialog(){return dt},get DialogPanel(){return ut},get DialogTitle(){return vt},get TransitionChild(){return ft},get TransitionRoot(){return mt},get $showNewStampModal(){return de},get $username(){return Qe},get initXmtp(){return Ze},get $xmtpClient(){return Q},get Input(){return Lt},StampCircle:ct,get anime(){return me},get connect(){return Ae},get reconnect(){return Ye},get getAccount(){return ne},get disconnect(){return Xe},get getConnectors(){return Ie},get watchConnections(){return Ge},get config(){return L}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},rn=a("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),sn={class:"fixed inset-0 z-[54] w-screen h-screen"},ln={class:"flex min-h-full items-end justify-center text-center sm:items-center"},cn=a("iconify-icon",{class:"text-4xl",icon:"material-symbols:close"},null,-1),dn=[cn],un={key:0,ref:"page_1",class:"flex flex-col justify-center items-center"},vn=a("p",{id:"text1-1",class:"max-h-0 overflow-hidden whitespace-break-spaces text-white font-brand text-3xl sm:text-5xl mb-4"},"Let's make a new stamp!",-1),fn=a("p",{id:"text1-2",class:"max-h-0 overflow-hidden text-white font-brand text-3xl sm:text-5xl"},"Connect your Wallet",-1),mn={id:"text1-3",class:"max-h-0 overflow-hidden w-full flex justify-center items-center flex-col"},pn={class:"w-full max-w-sm space-y-4 mt-8 px-4"},gn=a("p",{class:"text-white text-xl py-8"},"or create a new wallet ;)",-1),hn={class:"w-full max-w-sm px-4"},wn=a("p",{class:"text-white mt-2"},"with Coinbase Smart Wallet",-1),bn={key:1,ref:"page_1_5",id:"page1_5"},xn=a("div",{class:"flex justify-center items-center mb-12"},[a("iconify-icon",{id:"text1-5-wallet",class:"text-8xl text-white absolute opacity-0",icon:"material-symbols:wallet"}),a("iconify-icon",{id:"text1-5-tick",class:"text-8xl text-white absolute opacity-0 scale-0",icon:"hugeicons:tick-04"})],-1),_n=a("p",{id:"text1-5-1",class:"max-h-0 overflow-hidden text-white font-brand text-5xl mb-4"},"Connected",-1),yn={id:"text1-5-2",class:"max-h-0 overflow-hidden text-xl text-white"},Cn={key:2,ref:"page_2",id:"page2",class:"scale-0 opacity-0 flex flex-col justify-center items-center w-full px-4"},Sn=a("p",{class:"text-white font-brand text-2xl sm:text-5xl mb-4"},"What's your name?",-1),$n=a("p",{class:"text-white font-brand text-2xl sm:text-3xl mb-2"},"A simple one would do",-1),Dn=a("p",{class:"text-white font-brand sm:text-base text-sm"},"(like the one you tell in Starbucks)",-1),kn={key:3,class:"flex flex-col justify-center items-center"},Tn=a("p",{class:"text-white font-brand sm:text-5xl text-3xl mb-4"},"Turn on notifications",-1),On=a("p",{class:"text-white font-brand sm:text-3xl text-lg mb-2"},"We might need to announce a winner",-1),Pn={class:"p-8 aspect-square bg-white/10 flex justify-center items-center flex-col space-y-4 my-4 rounded-xl text-center"},jn=a("iconify-icon",{class:"text-black text-5xl group-hover:text-white animate-bounce",icon:"mdi:bell-plus"},null,-1),An=[jn],In=a("p",{class:"text-white"},"Tap to Request Permission",-1),Mn={key:4,class:"flex flex-col justify-center items-center"},En=a("p",{class:"text-white font-brand text-5xl mb-4"},[De("Please press "),a("strong",{class:"underline"},"Allow")],-1),Rn=[En],Nn={key:5,class:"flex flex-col justify-center items-center"},Ln=a("p",{class:"text-white font-brand text-2xl sm:text-5xl mb-4"},"Your stamp is ready!",-1),Wn=a("p",{class:"text-white font-brand text-xl sm:text-3xl mb-2"},"Now you can stamp all invitations.",-1),Bn=a("p",{class:"text-white font-brand mt-8 mb-2"},"This stamp is yours forever. To restore this stamp, just connect your wallet.",-1),zn={class:"w-full flex justify-center items-center py-12"},Fn={key:1,class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 px-12 font-bold rounded-md p-4 text-xl font-brand bg-white"};function Un(o,t,s,e,r,l){return w(),C("div",null,[D(e.TransitionRoot,{as:"template",show:e.open},{default:P(()=>[D(e.Dialog,{class:"relative z-[53]"},{default:P(()=>[D(e.TransitionChild,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:P(()=>[rn]),_:1}),a("div",sn,[a("div",ln,[D(e.TransitionChild,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:P(()=>[D(e.DialogPanel,{class:"w-screen h-screen bg-gradient-to-b from-blue-500 to-blue-800 flex justify-center items-center"},{default:P(()=>[a("button",{onClick:t[0]||(t[0]=n=>e.hide()),class:"bg-white w-14 h-14 absolute top-4 right-4 z-[55] rounded-full flex justify-center items-center shadow-xl active:scale-90 hover:bg-red-500 text-red-500 hover:text-white hover:ring-red-300 hover:ring-4 hover:ring-offset-4 duration-300"},dn),e.page==1?(w(),C("div",un,[vn,fn,a("div",mn,[a("div",pn,[a("button",{onClick:t[1]||(t[1]=n=>e.connectWallet("io.metamask")),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full rounded-md p-4 text-xl font-brand bg-white"},"Metamask"),a("button",{onClick:t[2]||(t[2]=n=>e.connectWallet("io.rabby")),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full rounded-md p-4 text-xl font-brand bg-white"},"Rabby"),a("button",{onClick:t[3]||(t[3]=n=>e.connectWallet("coinbaseWalletSDK")),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full rounded-md p-4 text-xl font-brand bg-white"},"Coinbase Smart Wallet")]),gn,a("div",hn,[a("button",{onClick:t[4]||(t[4]=n=>e.createWallet()),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full rounded-md p-4 text-xl font-brand bg-white"},"Create New Wallet"),wn])])],512)):V("",!0),e.page==1.5?(w(),C("div",bn,[xn,_n,a("p",yn,ae(e.connectedWalletAddress),1)],512)):V("",!0),e.page==2?(w(),C("div",Cn,[Sn,$n,Dn,oa(a("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>e.nameInput=n),placeholder:"Name the next billionare...",class:"mt-8 mb-12 text-white placeholder:text-white placeholder:text-opacity-30 text-3xl w-full max-w-sm bg-transparent border-b py-2 border-b-white rounded-none focus:outline-none text-center"},null,512),[[Xt,e.nameInput]]),a("button",{onClick:t[6]||(t[6]=n=>e.confirmName()),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full max-w-sm rounded-md p-4 text-xl font-brand bg-white"},"My name is "+ae(e.nameInput?e.nameInput:"..."),1)],512)):V("",!0),e.page==3?(w(),C("div",kn,[Tn,On,a("div",Pn,[a("button",{onClick:t[7]||(t[7]=n=>e.requestNotification()),class:"w-28 h-28 bg-white rounded-full active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 group"},An),In])])):V("",!0),e.page==3.5?(w(),C("div",Mn,Rn)):V("",!0),e.page==4?(w(),C("div",Nn,[Ln,Wn,Bn,a("div",zn,[D(e.StampCircle,{address:e.getAccount(e.config)?.address,name:e.$username.value},null,8,["address","name"])]),e.isBusy?V("",!0):(w(),C("button",{key:0,onClick:t[8]||(t[8]=n=>e.completeStamp()),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 px-12 font-bold rounded-md p-4 text-xl font-brand bg-white"},"Nice!")),e.isBusy?(w(),C("button",Fn,"Loading...")):V("",!0)])):V("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const Hn=ve(on,[["render",Un]]),qn={__name:"ConnectWallet",setup(o,{expose:t}){t();const s=f(!1),e=()=>{s.value=!0},r=()=>{s.value=!1,xe.set(!1)};we(()=>{xe.subscribe(()=>{xe.get()?e():r()})});const l=async _=>{if(ne(L)?.address)n();else{console.log("_connect wallet");const h=Ie(L).find(c=>c.id===_);if(console.log(h),h)try{await Ae(L,{connector:h}),r()}catch(c){console.log(c),alert(`Wallet fail to connect : ${c?.message}`)}else alert("No wallet found.")}},n=()=>{de.set(!0),r()},m={open:s,show:e,hide:r,_connect:l,createStamp:n,ref:f,onMounted:we,toRefs:Me,get Dialog(){return dt},get DialogPanel(){return ut},get DialogTitle(){return vt},get TransitionChild(){return ft},get TransitionRoot(){return mt},get $showWalletModal(){return xe},get $showNewStampModal(){return de},get connect(){return Ae},get reconnect(){return Ye},get getAccount(){return ne},get disconnect(){return Xe},get getConnectors(){return Ie},get watchConnections(){return Ge},get config(){return L}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},Vn=a("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Kn={class:"fixed inset-0 z-[52] w-screen h-screen overflow-y-auto"},Jn={class:"flex items-center justify-center text-center w-full h-full"},Yn={class:"w-full max-w-sm rounded-xl bg-white relative"},Gn=a("iconify-icon",{class:"text-xl",icon:"material-symbols:close"},null,-1),Xn=[Gn],Qn=a("div",{class:"pt-8 pb-4 mt-4"},[a("h1",{class:"text-xl font-brand font-bold"},"Connect Wallet")],-1),Zn={class:"p-4 space-y-3"},eo=a("p",{class:"mt-8 py-2"},"Sounds alien? Maybe you need a stamp.",-1),to={class:"w-full px-4 pb-4"};function ao(o,t,s,e,r,l){return w(),C("div",null,[a("div",{onClick:t[0]||(t[0]=n=>o.toggleModal())},[ge(o.$slots,"default")]),D(e.TransitionRoot,{as:"template",show:e.open},{default:P(()=>[D(e.Dialog,{class:"relative z-[51]",onClose:t[7]||(t[7]=n=>e.open=!1)},{default:P(()=>[D(e.TransitionChild,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:P(()=>[Vn]),_:1}),a("div",Kn,[a("div",Jn,[D(e.TransitionChild,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:P(()=>[D(e.DialogPanel,{class:"w-full h-full flex justify-center items-center"},{default:P(()=>[a("div",Yn,[a("button",{onClick:t[1]||(t[1]=n=>e.hide()),class:"absolute top-2 right-2 w-8 h-8 flex justify-center items-center bg-red-100 rounded-full active:scale-90 hover:bg-red-500 text-red-500 hover:text-white hover:ring-red-300 hover:ring-4 hover:ring-offset-4 duration-300"},Xn),Qn,a("div",Zn,[a("button",{onClick:t[2]||(t[2]=n=>e._connect("io.metamask")),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full rounded-md p-4 text-lg font-brand bg-blue-100 text-blue-500 font-bold"},"Metamask"),a("button",{onClick:t[3]||(t[3]=n=>e._connect("io.rabby")),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full rounded-md p-4 text-lg font-brand bg-blue-100 text-blue-500 font-bold"},"Rabby"),a("button",{onClick:t[4]||(t[4]=n=>e._connect("coinbaseWalletSDK")),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full rounded-md p-4 text-lg font-brand bg-blue-100 text-blue-500 font-bold"},"Coinbase Smart Wallet"),a("button",{onClick:t[5]||(t[5]=n=>e._connect("injected")),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full rounded-md p-4 text-lg font-brand bg-blue-100 text-blue-500 font-bold"},"Injected Wallet")]),eo,a("div",to,[a("button",{onClick:t[6]||(t[6]=n=>e.createStamp()),class:"active:scale-90 hover:bg-blue-500 hover:text-white hover:ring-blue-300 hover:ring-4 hover:ring-offset-4 duration-300 w-full rounded-md p-4 text-lg font-brand bg-blue-100 text-blue-500 font-bold"},"Create Stamp")])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}const no=ve(qn,[["render",ao]]);(function(){try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode('[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32,.72,0,1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top],.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left],.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height, 0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left],[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height, 0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32,.72,0,1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]:after{content:"";position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]:after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]:after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]:after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]:after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@keyframes fake-animation{}@media (hover: hover) and (pointer: fine){[vaul-drawer]{-webkit-user-select:none;user-select:none}}')),document.head.appendChild(o)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const oo=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ro=o=>typeof o<"u";function so(o){return JSON.parse(JSON.stringify(o))}function At(o,t,s,e={}){var r,l,n;const{clone:m=!1,passive:_=!1,eventName:h,deep:c=!1,defaultValue:j,shouldEmit:y}=e,k=la(),T=s||k?.emit||((r=k?.$emit)==null?void 0:r.bind(k))||((n=(l=k?.proxy)==null?void 0:l.$emit)==null?void 0:n.bind(k?.proxy));let i=h;t||(t="modelValue"),i=i||`update:${t.toString()}`;const p=x=>m?typeof m=="function"?m(x):so(x):x,v=()=>ro(o[t])?p(o[t]):j,b=x=>{y?y(x)&&T(i,x):T(i,x)};if(_){const x=v(),A=f(x);let u=!1;return F(()=>o[t],d=>{u||(u=!0,A.value=p(d),Rt(()=>u=!1))}),F(A,d=>{!u&&(d!==o[t]||c)&&b(d)},{deep:c}),A}else return Z({get(){return v()},set(x){b(x)}})}const[zt,lo]=ma("DrawerRoot"),Ft=new WeakMap;function N(o,t,s=!1){if(!o||!(o instanceof HTMLElement)||!t)return;const e={};Object.entries(t).forEach(([r,l])=>{if(r.startsWith("--")){o.style.setProperty(r,l);return}e[r]=o.style[r],o.style[r]=l}),!s&&Ft.set(o,e)}function Ve(o,t){if(!o||!(o instanceof HTMLElement))return;const s=Ft.get(o);s&&(t?o.style[t]=s[t]:Object.entries(s).forEach(([e,r])=>{o.style[e]=r}))}function Ke(o,t){const s=window.getComputedStyle(o),e=s.transform||s.webkitTransform||s.mozTransform;let r=e.match(/^matrix3d\((.+)\)$/);return r?Number.parseFloat(r[1].split(", ")[z(t)?13:12]):(r=e.match(/^matrix\((.+)\)$/),r?Number.parseFloat(r[1].split(", ")[z(t)?5:4]):null)}function io(o){return 8*(Math.log(o+1)-2)}function z(o){switch(o){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return o}}const E={DURATION:.5,EASE:[.32,.72,0,1]},Ut=.4;function co({activeSnapPoint:o,snapPoints:t,drawerRef:s,overlayRef:e,fadeFromIndex:r,onSnapPointChange:l,direction:n}){const m=Z(()=>(t.value&&o.value===t.value[t.value.length-1])??null),_=Z(()=>t.value&&t.value.length>0&&(r?.value||r?.value===0)&&!Number.isNaN(r?.value)&&t.value[r?.value??-1]===o.value||!t.value),h=Z(()=>{var p;return((p=t.value)==null?void 0:p.findIndex(v=>v===o.value))??null}),c=Z(()=>{var p;return((p=t.value)==null?void 0:p.map(v=>{const b=typeof window<"u",x=typeof v=="string";let A=0;if(x&&(A=Number.parseInt(v,10)),z(n.value)){const d=x?A:b?v*window.innerHeight:0;return b?n.value==="bottom"?window.innerHeight-d:-window.innerHeight+d:d}const u=x?A:b?v*window.innerWidth:0;return b?n.value==="right"?window.innerWidth-u:-window.innerWidth+u:u}))??[]}),j=Z(()=>{var p;return h.value!==null?(p=c.value)==null?void 0:p[h.value]:null}),y=p=>{var v,b,x,A;const u=((v=c.value)==null?void 0:v.findIndex(d=>d===p))??null;Rt(()=>{var d;l(u,c.value),N((d=s.value)==null?void 0:d.$el,{transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,transform:z(n.value)?`translate3d(0, ${p}px, 0)`:`translate3d(${p}px, 0, 0)`})}),c.value&&u!==c.value.length-1&&u!==r?.value?N((b=e.value)==null?void 0:b.$el,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,opacity:"0"}):N((x=e.value)==null?void 0:x.$el,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,opacity:"1"}),o.value=u!==null?((A=t.value)==null?void 0:A[u])??null:null};F([o,c,t],()=>{var p;if(o.value){const v=((p=t.value)==null?void 0:p.findIndex(b=>b===o.value))??-1;c.value&&v!==-1&&typeof c.value[v]=="number"&&y(c.value[v])}},{immediate:!0});function k({draggedDistance:p,closeDrawer:v,velocity:b,dismissible:x}){var A,u,d;if(r===void 0)return;const I=n.value==="bottom"||n.value==="right"?(j.value??0)-p:(j.value??0)+p,Y=h.value===(r.value??0)-1,se=h.value===0,ee=p>0;if(Y&&N((A=e.value)==null?void 0:A.$el,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`}),b>2&&!ee){x?v():y(c.value[0]);return}if(b>2&&ee&&c&&t.value){y(c.value[t.value.length-1]);return}const G=(u=c.value)==null?void 0:u.reduce((te,O)=>typeof te!="number"||typeof O!="number"?te:Math.abs(O-I)<Math.abs(te-I)?O:te),ie=z(n.value)?window.innerHeight:window.innerWidth;if(b>Ut&&Math.abs(p)<ie*.4){const te=ee?1:-1;if(te>0&&m){y(c.value[(((d=t.value)==null?void 0:d.length)??0)-1]);return}if(se&&te<0&&x&&v(),h.value===null)return;y(c.value[h.value+te]);return}y(G)}function T({draggedDistance:p}){var v;if(j.value===null)return;const b=n.value==="bottom"||n.value==="right"?(j.value??0)-p:(j.value??0)+p;(n.value==="bottom"||n.value==="right")&&b<c.value[c.value.length-1]||(n.value==="top"||n.value==="left")&&b>c.value[c.value.length-1]||N((v=s.value)==null?void 0:v.$el,{transform:z(n.value)?`translate3d(0, ${b}px, 0)`:`translate3d(${b}px, 0, 0)`})}function i(p,v){if(!t||typeof h.value!="number"||!c.value||r===void 0)return null;const b=h.value===(r.value??0)-1;if(h.value>=(r.value??0)&&v)return 0;if(b&&!v)return 1;if(!_.value&&!b)return null;const x=b?h.value+1:h.value-1,A=b?c.value[x]-c.value[x-1]:c.value[x+1]-c.value[x],u=p/Math.abs(A);return b?1-u:u}return{isLastSnapPoint:m,shouldFade:_,getPercentageDragged:i,activeSnapPointIndex:h,onRelease:k,onDrag:T,snapPointsOffset:c}}let Be=null;function uo(o){const{isOpen:t,modal:s,nested:e,hasBeenOpened:r}=o,l=f(typeof window<"u"?window.location.href:""),n=f(0);function m(){if(Be===null&&t.value){Be={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height};const{scrollX:h,innerHeight:c}=window;document.body.style.position="fixed",document.body.style.top=`-${n.value}px`,document.body.style.left=`-${h}px`,document.body.style.right="0px",document.body.style.height="auto",setTimeout(()=>{requestAnimationFrame(()=>{const j=c-window.innerHeight;j&&n.value>=c&&(document.body.style.top=`-${n.value+j}px`)})},300)}}function _(){if(Be!==null){const h=-Number.parseInt(document.body.style.top,10),c=-Number.parseInt(document.body.style.left,10);Object.assign(document.body.style,Be),requestAnimationFrame(()=>{if(l.value!==window.location.href){l.value=window.location.href;return}window.scrollTo(c,h)}),Be=null}}return we(()=>{function h(){n.value=window.scrollY}h(),window.addEventListener("scroll",h),Nt(()=>{window.removeEventListener("scroll",h)})}),F([t,r,l],()=>{e.value||!r.value||(t.value?(!window.matchMedia("(display-mode: standalone)").matches&&m(),s.value||setTimeout(()=>{_()},500)):_())}),{restorePositionSetting:_}}const vo=.25,fo=100,It=8,$e=16,mo=26,Mt="vaul-dragging";function po(o,t){return o&&o.value?o:t}function go(o){const{emitDrag:t,emitRelease:s,emitClose:e,emitOpenChange:r,open:l,dismissible:n,nested:m,fixed:_,modal:h,shouldScaleBackground:c,scrollLockTimeout:j,closeThreshold:y,activeSnapPoint:k,fadeFromIndex:T,direction:i}=o,p=f(l.value??!1),v=f(!1),b=f(!1),x=f(!1),A=f(!1),u=f(null),d=f(null),I=f(null),Y=f(null),se=f(null),ee=f(!0),G=f(null),ie=f(0),te=f(!1);f(0);const O=f(null);f(0);const ze=Z(()=>{var g;return((g=O.value)==null?void 0:g.$el.getBoundingClientRect().height)||0}),oe=po(o.snapPoints,f(void 0)),{activeSnapPointIndex:Ne,onRelease:Fe,snapPointsOffset:S,onDrag:W,shouldFade:$,getPercentageDragged:K}=co({snapPoints:oe,activeSnapPoint:k,drawerRef:O,fadeFromIndex:T,overlayRef:u,onSnapPointChange:B,direction:i});function B(g,M){oe.value&&g===M.length-1&&(d.value=new Date)}const{restorePositionSetting:Te}=uo({isOpen:p,modal:h,nested:m,hasBeenOpened:v});function fe(){return(window.innerWidth-mo)/window.innerWidth}function pt(g,M){var U;if(!g)return!1;let R=g;const q=(U=window.getSelection())==null?void 0:U.toString(),X=O.value?Ke(O.value.$el,i.value):null,ce=new Date;if(R.hasAttribute("data-vaul-no-drag")||R.closest("[data-vaul-no-drag]"))return!1;if(i.value==="right"||i.value==="left")return!0;if(d.value&&ce.getTime()-d.value.getTime()<500)return!1;if(X!==null&&(i.value==="bottom"?X>0:X<0))return!0;if(q&&q.length>0)return!1;if(se.value&&ce.getTime()-se.value.getTime()<j.value&&X===0||M)return se.value=ce,!1;for(;R;){if(R.scrollHeight>R.clientHeight){if(R.scrollTop!==0)return se.value=new Date,!1;if(R.getAttribute("role")==="dialog")return!0}R=R.parentNode}return!0}function Ht(g){!n.value&&!oe.value||O.value&&!O.value.$el.contains(g.target)||(x.value=!0,I.value=new Date,g.target.setPointerCapture(g.pointerId),ie.value=z(i.value)?g.clientY:g.clientX)}function qt(g){var M,U,R,q,X,ce;if(O.value&&x.value){const Oe=i.value==="bottom"||i.value==="right"?1:-1,Ue=(ie.value-(z(i.value)?g.clientY:g.clientX))*Oe,He=Ue>0,ht=oe.value&&!n.value&&!He;if(ht&&Ne.value===0)return;const at=Math.abs(Ue),wt=document.querySelector("[vaul-drawer-wrapper]");let Ce=at/ze.value;const bt=K(at,He);if(bt!==null&&(Ce=bt),ht&&Ce>=1||!ee.value&&!pt(g.target,He))return;if((M=O?.value)==null||M.$el.classList.add(Mt),ee.value=!0,N((U=O.value)==null?void 0:U.$el,{transition:"none"}),N((R=u.value)==null?void 0:R.$el,{transition:"none"}),oe.value&&W({draggedDistance:Ue}),He&&!oe.value){const Se=io(Ue),qe=Math.min(Se*-1,0)*Oe;N((q=O.value)==null?void 0:q.$el,{transform:z(i.value)?`translate3d(0, ${qe}px, 0)`:`translate3d(${qe}px, 0, 0)`});return}const Gt=1-Ce;if(($.value||T.value&&Ne.value===T.value-1)&&(t(Ce),N((X=u.value)==null?void 0:X.$el,{opacity:`${Gt}`,transition:"none"},!0)),wt&&u.value&&c.value){const Se=Math.min(fe()+Ce*(1-fe()),1),qe=8-Ce*8,xt=Math.max(0,14-Ce*14);N(wt,{borderRadius:`${qe}px`,transform:z(i.value)?`scale(${Se}) translate3d(0, ${xt}px, 0)`:`scale(${Se}) translate3d(${xt}px, 0, 0)`,transition:"none"},!0)}if(!oe.value){const Se=at*Oe;N((ce=O.value)==null?void 0:ce.$el,{transform:z(i.value)?`translate3d(0, ${Se}px, 0)`:`translate3d(${Se}px, 0, 0)`})}}}function gt(){var g;if(!O.value)return;const M=document.querySelector("[vaul-drawer-wrapper]"),U=Ke(O.value.$el,i.value);N(O.value.$el,{transform:"translate3d(0, 0, 0)",transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`}),N((g=u.value)==null?void 0:g.$el,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,opacity:"1"}),c.value&&U&&U>0&&p.value&&N(M,{borderRadius:`${It}px`,overflow:"hidden",...z(i.value)?{transform:`scale(${fe()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${fe()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${E.DURATION}s`,transitionTimingFunction:`cubic-bezier(${E.EASE.join(",")})`},!0)}function Le(){var g;O.value&&(N(O.value.$el,{transform:z(i.value)?`translate3d(0, ${i.value==="bottom"?"100%":"-100%"}, 0)`:`translate3d(${i.value==="right"?"100%":"-100%"}, 0, 0)`,transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`}),N((g=u.value)==null?void 0:g.$el,{opacity:"0",transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`}),tt(!1),window.setTimeout(()=>{b.value=!1,p.value=!1},300),window.setTimeout(()=>{oe.value&&(k.value=oe.value[0])},E.DURATION*1e3))}sa(()=>{if(!p.value&&c.value&&oo){const g=setTimeout(()=>{Ve(document.body)},200);return()=>clearTimeout(g)}}),Nt(()=>{tt(!1),Te()});function Vt(g){if(!x.value||!O.value)return;O.value.$el.classList.remove(Mt),ee.value=!1,x.value=!1,Y.value=new Date;const M=Ke(O.value.$el,i.value);if(!pt(g.target,!1)||!M||Number.isNaN(M)||I.value===null)return;const U=Y.value.getTime()-I.value.getTime(),R=ie.value-(z(i.value)?g.clientY:g.clientX),q=Math.abs(R)/U;if(q>.05&&(A.value=!0,window.setTimeout(()=>{A.value=!1},200)),oe.value){const ce=i.value==="bottom"||i.value==="right"?1:-1;Fe({draggedDistance:R*ce,closeDrawer:Le,velocity:q,dismissible:n.value}),s(!0);return}if(i.value==="bottom"||i.value==="right"?R>0:R<0){gt(),s(!0);return}if(q>Ut){Le(),s(!1);return}const X=Math.min(O.value.$el.getBoundingClientRect().height??0,window.innerHeight);if(M>=X*y.value){Le(),s(!1);return}s(!0),gt()}F(p,g=>{g&&(d.value=new Date,tt(!0)),r(g)},{immediate:!0}),F(l,g=>{g?(p.value=g,v.value=!0):Le()},{immediate:!0});function tt(g){const M=document.querySelector("[vaul-drawer-wrapper]");!M||!c.value||(g?(N(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),N(document.body,{background:"black"},!0),N(M,{borderRadius:`${It}px`,overflow:"hidden",...z(i.value)?{transform:`scale(${fe()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${fe()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${E.DURATION}s`,transitionTimingFunction:`cubic-bezier(${E.EASE.join(",")})`})):(Ve(M,"overflow"),Ve(M,"transform"),Ve(M,"borderRadius"),N(M,{transitionProperty:"transform, border-radius",transitionDuration:`${E.DURATION}s`,transitionTimingFunction:`cubic-bezier(${E.EASE.join(",")})`})))}function Kt(g){var M,U;const R=g?(window.innerWidth-$e)/window.innerWidth:1,q=g?-$e:0;G.value&&window.clearTimeout(G.value),N((M=O.value)==null?void 0:M.$el,{transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,transform:`scale(${R}) translate3d(0, ${q}px, 0)`}),!g&&(U=O.value)!=null&&U.$el&&(G.value=window.setTimeout(()=>{var X,ce;const Oe=Ke((X=O.value)==null?void 0:X.$el,i.value);N((ce=O.value)==null?void 0:ce.$el,{transition:"none",transform:z(i.value)?`translate3d(0, ${Oe}px, 0)`:`translate3d(${Oe}px, 0, 0)`})},500))}function Jt(g){var M;if(g<0)return;const U=z(i.value)?window.innerHeight:window.innerWidth,R=(U-$e)/U,q=R+g*(1-R),X=-$e+g*$e;N((M=O.value)==null?void 0:M.$el,{transform:z(i.value)?`scale(${q}) translate3d(0, ${X}px, 0)`:`scale(${q}) translate3d(${X}px, 0, 0)`,transition:"none"})}function Yt(g){var M;const U=z(i.value)?window.innerHeight:window.innerWidth,R=g?(U-$e)/U:1,q=g?-$e:0;g&&N((M=O.value)==null?void 0:M.$el,{transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,transform:z(i.value)?`scale(${R}) translate3d(0, ${q}px, 0)`:`scale(${R}) translate3d(${q}px, 0, 0)`})}return{open:l,isOpen:p,modal:h,keyboardIsOpen:te,hasBeenOpened:v,isVisible:b,drawerRef:O,drawerHeightRef:ze,overlayRef:u,isDragging:x,dragStartTime:I,isAllowedToDrag:ee,snapPoints:oe,activeSnapPoint:k,pointerStart:ie,dismissible:n,snapPointsOffset:S,direction:i,shouldFade:$,fadeFromIndex:T,shouldScaleBackground:c,onPress:Ht,onDrag:qt,onRelease:Vt,closeDrawer:Le,onNestedDrag:Jt,onNestedRelease:Yt,onNestedOpenChange:Kt,emitClose:e,emitDrag:t,emitRelease:s,emitOpenChange:r,nested:m}}const ho=he({__name:"DrawerRoot",props:{activeSnapPoint:{default:void 0},closeThreshold:{default:vo},shouldScaleBackground:{type:Boolean,default:void 0},scrollLockTimeout:{default:fo},fixed:{type:Boolean,default:void 0},dismissible:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:void 0},nested:{type:Boolean,default:!1},direction:{default:"bottom"},snapPoints:{default:void 0},fadeFromIndex:{default:void 0}},emits:["drag","release","close","update:open","update:activeSnapPoint"],setup(o,{expose:t,emit:s}){const e=o,r=s;ra();const l=Z(()=>e.fadeFromIndex??(e.snapPoints&&e.snapPoints.length-1)),n=At(e,"open",r,{defaultValue:e.defaultOpen,passive:e.open===void 0}),m=At(e,"activeSnapPoint",r,{passive:e.activeSnapPoint===void 0}),_={emitDrag:T=>r("drag",T),emitRelease:T=>r("release",T),emitClose:()=>r("close"),emitOpenChange:T=>{r("update:open",T)}},{closeDrawer:h,hasBeenOpened:c,modal:j,isOpen:y}=lo(go({..._,...Me(e),activeSnapPoint:m,fadeFromIndex:l,open:n}));function k(T){if(n.value!==void 0){_.emitOpenChange(T);return}T?(c.value=!0,y.value=T):h()}return t({open:y}),(T,i)=>(w(),ye(J(va),{open:J(y),modal:J(j),"onUpdate:open":k},{default:P(()=>[ge(T.$slots,"default",{open:J(y)})]),_:3},8,["open","modal"]))}}),wo=he({__name:"DrawerOverlay",setup(o){const{overlayRef:t,snapPoints:s,isVisible:e,isOpen:r,shouldFade:l}=zt(),n=Z(()=>{var m;return s&&(((m=s.value)==null?void 0:m.length)??0)>0});return(m,_)=>(w(),ye(J(pa),{ref_key:"overlayRef",ref:t,"vaul-drawer-visible":J(e)?"true":"false","vaul-overlay":"","vaul-snap-points":J(r)&&n.value?"true":"false","vaul-snap-points-overlay":J(r)&&J(l)?"true":"false"},null,8,["vaul-drawer-visible","vaul-snap-points","vaul-snap-points-overlay"]))}}),bo=he({__name:"DrawerContent",setup(o){const{open:t,isOpen:s,isVisible:e,snapPointsOffset:r,drawerRef:l,onPress:n,onDrag:m,onRelease:_,modal:h,emitOpenChange:c,dismissible:j,keyboardIsOpen:y,closeDrawer:k,direction:T}=zt(),i=Z(()=>r.value&&r.value.length>0?`${r.value[0]}px`:"0");function p(v){if(!h.value||v.defaultPrevented){v.preventDefault();return}y.value&&(y.value=!1),v.preventDefault(),j.value&&c(!1),!(!j.value||t.value!==void 0)&&k()}return F(s,v=>{v&&setTimeout(()=>{e.value=!0},1)},{immediate:!0}),(v,b)=>(w(),ye(J(fa),{ref_key:"drawerRef",ref:l,"vaul-drawer":"","vaul-drawer-direction":J(T),"vaul-drawer-visible":J(e)?"true":"false",style:je({"--snap-point-height":i.value}),onPointerdown:J(n),onPointermove:J(m),onPointerup:J(_),onPointerDownOutside:p,onEscapeKeyDown:b[0]||(b[0]=x=>{J(j)||x.preventDefault()})},{default:P(()=>[ge(v.$slots,"default")]),_:3},8,["vaul-drawer-direction","vaul-drawer-visible","style","onPointerdown","onPointermove","onPointerup"]))}}),xo=he({__name:"Drawer",props:{activeSnapPoint:{},closeThreshold:{},shouldScaleBackground:{type:Boolean,default:!0},scrollLockTimeout:{},fixed:{type:Boolean},dismissible:{type:Boolean},modal:{type:Boolean},open:{type:Boolean},defaultOpen:{type:Boolean},nested:{type:Boolean},direction:{},snapPoints:{},fadeFromIndex:{}},emits:["drag","release","close","update:open","update:activeSnapPoint"],setup(o,{expose:t,emit:s}){t();const e=o,r=s,l=Wt(e,r),n={props:e,emits:r,forwarded:l,get DrawerRoot(){return ho}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}});function _o(o,t,s,e,r,l){return w(),ye(e.DrawerRoot,ia(ca(e.forwarded)),{default:P(()=>[ge(o.$slots,"default")]),_:3},16)}const yo=ve(xo,[["render",_o]]),Co=he({__name:"DrawerOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o,{expose:t}){t();const s=o,e=Z(()=>{const{class:l,...n}=s;return n}),r={props:s,delegatedProps:e,get DrawerOverlay(){return wo},get cn(){return Re}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function So(o,t,s,e,r,l){return w(),ye(e.DrawerOverlay,et(e.delegatedProps,{class:e.cn("fixed inset-0 z-50 bg-black/80",e.props.class)}),null,16,["class"])}const $o=ve(Co,[["render",So]]),Do=he({__name:"DrawerContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{expose:t,emit:s}){t();const e=o,r=s,l=Wt(e,r),n={props:e,emits:r,forwarded:l,get DrawerContent(){return bo},get DrawerPortal(){return ga},DrawerOverlay:$o,get cn(){return Re}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),ko=a("div",{class:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"},null,-1);function To(o,t,s,e,r,l){return w(),ye(e.DrawerPortal,null,{default:P(()=>[D(e.DrawerOverlay),D(e.DrawerContent,et(e.forwarded,{class:e.cn("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e.props.class)}),{default:P(()=>[ko,ge(o.$slots,"default")]),_:3},16,["class"])]),_:3})}const Oo=ve(Do,[["render",To]]),Po=he({__name:"DrawerHeader",props:{class:{}},setup(o,{expose:t}){t();const e={props:o,get cn(){return Re}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function jo(o,t,s,e,r,l){return w(),C("div",{class:Ee(e.cn("grid gap-1.5 p-4 text-center sm:text-left",e.props.class))},[ge(o.$slots,"default")],2)}const Ao=ve(Po,[["render",jo]]),Io=he({__name:"DrawerFooter",props:{class:{}},setup(o,{expose:t}){t();const e={props:o,get cn(){return Re}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}});function Mo(o,t,s,e,r,l){return w(),C("div",{class:Ee(e.cn("mt-auto flex flex-col gap-2 p-4",e.props.class))},[ge(o.$slots,"default")],2)}const Eo=ve(Io,[["render",Mo]]),Ro=he({__name:"DrawerTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(o,{expose:t}){t();const s=o,e=Z(()=>{const{class:l,...n}=s;return n}),r={props:s,delegatedProps:e,get DrawerTitle(){return ha},get cn(){return Re}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function No(o,t,s,e,r,l){return w(),ye(e.DrawerTitle,et(e.delegatedProps,{class:e.cn("text-lg font-semibold leading-none tracking-tight",e.props.class)}),{default:P(()=>[ge(o.$slots,"default")]),_:3},16,["class"])}const Lo=ve(Ro,[["render",No]]),Wo=he({__name:"DrawerDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(o,{expose:t}){t();const s=o,e=Z(()=>{const{class:l,...n}=s;return n}),r={props:s,delegatedProps:e,get DrawerDescription(){return wa},get cn(){return Re}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function Bo(o,t,s,e,r,l){return w(),ye(e.DrawerDescription,et(e.delegatedProps,{class:e.cn("text-sm text-muted-foreground",e.props.class)}),{default:P(()=>[ge(o.$slots,"default")]),_:3},16,["class"])}const zo=ve(Wo,[["render",Bo]]),Fo={__name:"Chat",props:["project_info"],setup(o,{expose:t}){t();const s=o,{project_info:e}=Me(s),r=f([]),l=f([]),n=["R","E","M","O"];let m=0;const _=["#F5E804","#EE7CF5","#9EA3EB","#038B56"],h=f(n[m]),c=f(_[0]),j=f(null),y=f(!1),k=f(!1),T=f(!1),i=f(null),p=f(null),v=f(null),b=()=>{console.log("Sending message...");let S=me.timeline({easing:"easeOutExpo",duration:300});S.add({targets:"#formEl",translateY:-25,scale:.9}),S.add({targets:"#formEl",rotate:0,translateY:0,scale:1}),m=m===n.length-1?0:m+1,h.value=n[m];let W=me.timeline({easing:"easeOutExpo",duration:300});W.add({targets:".changing-text",rotate:360,scale:0}),W.add({targets:".changing-text",rotate:0,scale:1});let $=_.filter(K=>K!==c.value);c.value=$[Math.floor(Math.random()*$.length)]},x=S=>{console.log("showing modal from drawer"),console.log(S),le.set(!1),le.set(!0),be.set(null),be.set(S)},A=()=>{if(document?.querySelector(".campaignList")!=null){let S=document.querySelector(".campaignList");console.log("enabling overlay scrollbars"),ot(S,{scrollbars:{autoHide:"leave",autoHideDelay:500}})}if(document?.querySelector("#chatWindow")!=null){let S=document.querySelector("#chatWindow");console.log("enabling overlay scrollbars"),ot(S,{scrollbars:{autoHide:"leave",autoHideDelay:500}})}},u=S=>{i?.value&&i.value.scrollIntoView()};we(async()=>{ke.subscribe(B=>{console.log(B)}),_e.subscribe(B=>{j.value=B}),F(y,async()=>{}),F(p,()=>{A()}),F(v,()=>{A()}),F(l,()=>{u()}),A(),Ge(L,{onChange(B){let Te=ne(L);console.log("watchConnections",Te),d()}}),await Ye(L),d(),Q.subscribe(async B=>{if(Q.value){r.value=await Q.value.conversations.list(),console.log("conversations.value",r.value);let Te=r.value.find(fe=>fe.peerAddress.toLowerCase()===e.value.owner_address.toLowerCase());console.log("exists",Te);try{await Q.value.conversations.newConversation(e.value.owner_address.toLowerCase())}catch(fe){console.log("bypass bypass",fe)}Te||await G(),await G()}}),ue.subscribe(async()=>{console.log("$refreshMessages.value",ue.value),l.value.length==0&&(console.log("gggggggg"),r.value=await Q.value?.conversations.list()),G()});const S=window.location.search,$=new URLSearchParams(S).get("campaign");console.log("urlCampaign",$);const K=e.value?.campaigns.find(B=>Number(B.id)===Number($));K&&x(K),await fetch("/api/logs.json",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({payload:{token_symbol:e.value.token_symbol,token_address:e.value.token_address,campaign:parseInt($)},name:"visit",user_data:{address:ne(L)?.address}})}),u()});const d=async()=>{console.log(ne(L)?.address==!0),ne(L)?.address?(await Tt(),H.value&&(Ze(),k.value=!0,de.set(!1))):k.value=!1},I=async()=>{T.value=!0;let S=()=>new Promise(($,K)=>{let B=document.getElementById("showWelcomeEl");B?$(B):setTimeout(()=>{$(S())},100)});await S();let W=me.timeline({easing:"easeOutExpo",duration:300});W.add({targets:"#showWelcomeEl",opacity:1,scale:1,duration:500,easing:"easeInOutQuad",complete:()=>{k.value=!0}}),W.add({targets:"#showWelcomeEl",opacity:0,scale:1.5,duration:500,delay:600,easing:"easeInOutQuad",complete:()=>{T.value=!1}})},Y=async()=>{let S=ne(L);localStorage.removeItem(`xmtp-wallet-${S.address.toLowerCase()}`),H.set(null),await Xe(L)},se=()=>{de.set(!0)},ee=()=>{xe.set(!0)},G=async()=>{let S=r.value?.find(W=>W.peerAddress.toLowerCase()===e.value.owner_address.toLowerCase());if(console.log("selectedConversation",S),S){let W=await S.messages();console.log("_message",W),l.value=await Promise.all(W.map(async $=>{if($.contentType.sameAs(lt))try{const K=await Je.load($.content,Q.value);return{content:URL.createObjectURL(new Blob([Buffer.from(K.data)],{type:K.mimeType})),id:$.id,senderAddress:$.senderAddress,type:"attachment",sender:$.senderAddress.toLowerCase()==H.value.xmtp_address.toLowerCase()?"me":e.value.token_name}}catch{return{content:"",id:$.id,senderAddress:$.senderAddress,type:"media",sender:$.senderAddress.toLowerCase()==H.value.xmtp_address.toLowerCase()?"me":e.value.token_name}}else return{content:$.content,id:$.id,senderAddress:$.senderAddress,type:"text",sender:$.senderAddress.toLowerCase()==H.value.xmtp_address.toLowerCase()?"me":e.value.token_name}})),u();for await(const $ of await S.streamMessages())l.value.find(B=>B.id===$.id)||l.value.push({content:$.content,id:$.id,senderAddress:$.senderAddress,type:"text",sender:$.senderAddress.toLowerCase()==H.value.xmtp_address.toLowerCase()?"me":e.value.token_name}),u()}},ie=f(!1),te=f(""),O=async()=>{if(ie.value)return;ie.value=!0;let S=te.value;te.value="";try{const W=await Q.value.conversations.newConversation(e.value.owner_address.toLowerCase());b(),await W.send(S)}catch(W){console.log("sendMessage",W)}l.value.length==0&&(r.value=await Q.value.conversations.list(),G()),ie.value=!1,u()},ze=()=>{d(),I();const S=window.location.search,$=new URLSearchParams(S).get("campaign");console.log("urlCampaign",$);const K=e.value?.campaigns.find(B=>Number(B.id)===Number($));K&&x(K),setTimeout(()=>{G()},5e3)},oe=()=>{y.value=!0,Ne()},Ne=async()=>{if(y.value){console.log("showing receipt");let W=()=>new Promise(($,K)=>{let B=document.getElementById("whiteFlash");B?$(B):setTimeout(()=>{$(W())},100)});await W(),console.log("showing receipt"),me({targets:"#whiteFlash",opacity:0,duration:300,easing:"easeInOutSine"});var S=me.timeline({easing:"easeInOutSine",duration:300,delay:300});S.add({targets:"#receiptImage",scale:.8,rotate:"-6deg",duration:300},"-=150"),S.add({targets:"#receiptImage",rotate:"0deg",width:"200px",height:"200px",duration:300}),S.add({targets:"#receiptImage",translateY:-50,duration:300,easing:"easeInOutSine"},"-=300"),S.add({targets:"#receiptImage",opacity:0,translateY:100,duration:200,easing:"easeInOutSine"}),S.add({targets:"#blackDrop",opacity:0,duration:300,easing:"easeInOutSine"},"-=300"),S.complete=()=>{y.value=!1,ke.set(!1),_e.set(null)}}},Fe={props:s,project_info:e,conversations:r,messages:l,characters:n,get characterIndex(){return m},set characterIndex(S){m=S},colors:_,currentCharacter:h,currentColor:c,receiptImageData:j,showReceipt:y,gotStamp:k,showWelcome:T,spacer:i,campaignList1:p,campaignList2:v,sendMessage:b,showCampaignModalTrigger:x,enableOverlayScrollbars:A,scrollToBottom:u,checkWalletAccount:d,updateGotStamp:I,disconnectWallet:Y,showStampModal:se,showConnectWalletModal:ee,fetchMessages:G,isMessageBusy:ie,messageInput:te,pushXmtpMessage:O,afterWelcome:ze,showStampedAnimation:oe,receiptAnimation:Ne,onMounted:we,ref:f,watch:F,toRefs:Me,ModalVue:nn,NewStampModal:Hn,ConnectWallet:no,StampCircle:ct,get DropdownMenu(){return _a},get DropdownMenuContent(){return ya},get DropdownMenuItem(){return Ca},get DropdownMenuLabel(){return Sa},get DropdownMenuSeparator(){return $a},get DropdownMenuTrigger(){return Da},get Button(){return ka},get Drawer(){return yo},get DrawerClose(){return ba},get DrawerContent(){return Oo},get DrawerDescription(){return zo},get DrawerFooter(){return Eo},get DrawerHeader(){return Ao},get DrawerTitle(){return Lo},get DrawerTrigger(){return xa},get OverlayScrollbars(){return ot},get Input(){return Lt},get anime(){return me},get connect(){return Ae},get reconnect(){return Ye},get getAccount(){return ne},get disconnect(){return Xe},get getConnectors(){return Ie},get watchConnections(){return Ge},get config(){return L},get $showNewStampModal(){return de},get $showWalletModal(){return xe},get initUser(){return Tt},get initXmtp(){return Ze},get $userData(){return H},get $receiptImageData(){return _e},get $showReceipt(){return ke},get $xmtpClient(){return Q},get $refreshMessages(){return ue},get $showCampaignModal(){return le},get $selectedCampaign(){return be},get ContentTypeRemoteAttachment(){return lt},get RemoteAttachmentCodec(){return Je},get AttachmentCodec(){return it}};return Object.defineProperty(Fe,"__isScriptSetup",{enumerable:!1,value:!0}),Fe}},re=o=>(da("data-v-9a8e9842"),o=o(),ua(),o),Uo={class:"flex justify-center items-center w-full h-full max-h-[70vh] lg:h-[60vh]"},Ho={class:"w-full grid",style:{"grid-template-columns":"repeat(auto-fill, minmax(6rem, 1fr))"}},qo={key:1,id:"snapshotParent",class:"w-screen h-screen top-0 left-0 z-[999] fixed flex justify-center items-center"},Vo=re(()=>a("div",{id:"whiteFlash",class:"bg-white w-full h-full absolute z-30"},null,-1)),Ko=["src"],Jo=re(()=>a("div",{id:"blackDrop",class:"bg-black/50 w-full h-full absolute z-10"},null,-1)),Yo={key:2,id:"showWelcomeEl",class:"w-screen h-screen fixed top-0 left-0 z-[101] bg-[#EBE6DF] flex justify-center items-center flex-col opacity-0 scale-90"},Go=re(()=>a("h1",{class:"text-4xl font-brand font-bold mb-8 text-black"},"Welcome to",-1)),Xo={class:"text-black text-8xl font-brand font-semibold"},Qo=re(()=>a("p",{class:"text-black text-xl uppercase font-brand mt-8"},[De(" on "),a("span",{class:"bg-blue-500 text-white px-4 py-2 rounded-full"},"REMO")],-1)),Zo={key:3,class:"w-full flex justify-center items-center p-4 sm:p-0 h-full"},er={class:"w-full absolute hidden lg:grid grid-cols-[1fr_28rem_1fr] justify-center items-center"},tr={class:"flex flex-col justify-center items-center p-8"},ar={ref:"campaignList2",class:"campaignList bg-white z-50 rounded-xl shadow-xl max-h-[300px] overflow-hidden w-full max-w-xs bg-opacity-20 hover:bg-opacity-100 duration-300 backdrop-blur-md"},nr=re(()=>a("p",{class:"text-left text-xl font-brand font-bold p-4 border-b bg-white sticky top-0"},"Active Campaigns",-1)),or={class:"px-4"},rr={class:"py-2 flex justify-between items-center"},sr={class:"font-brand text-lg"},lr=["onClick"],ir=re(()=>a("div",null,null,-1)),cr={class:"w-full flex justify-center items-center flex-col"},dr={class:"w-full max-w-md h-full z-20"},ur={class:"lg:hidden -mt-12 pb-2"},vr={class:"fixed top-2 right-0 z-50 p-2 flex justify-between items-center w-full"},fr={class:"flex justify-start items-center space-x-4"},mr=re(()=>a("button",{class:"bg-white w-12 h-12 border rounded-xl shadow flex justify-center items-center"},[a("iconify-icon",{class:"text-xl",icon:"hugeicons:stamp-02"})],-1)),pr={class:"font-brand text-lg"},gr={class:"bg-black text-white font-brand font-semibold p-3 px-4 rounded-xl duration-300 hover:ring-2 hover:ring-black hover:ring-offset-2 active:scale-90"},hr={class:"bg-white z-50 rounded-xl shadow-xl max-h-[80vh] overflow-y-auto w-full"},wr={class:"px-4"},br={class:"py-2 flex justify-between items-center"},xr={class:"font-brand text-lg"},_r=["onClick"],yr={id:"chatWindow",class:"chat-parent shadow-xl w-full h-full rounded-xl p-4 pb-0 overflow-hidden max-h-[500px]"},Cr={class:"w-full bg-white text-black border-2 border-black/10 rounded-md p-4 font-brand font-bold sticky top-0 z-20"},Sr={class:"chat"},$r={key:1,class:"w-[100px] h-[100px] border rounded-md"},Dr=["src"],kr={key:2,class:"w-[100px] h-[100px] border rounded-md"},Tr={ref:"spacer",class:"w-full h-4"},Or=re(()=>a("div",null,[a("button",{type:"submit",class:"w-12 h-12 flex justify-center items-center bg-green-500 shadow-md text-white rounded-full hover:shadow-sm duration-300 hover:ring-2 hover:ring-green-500 hover:scale-90 active:scale-75 hover:ring-offset-2"},[a("iconify-icon",{class:"text-2xl",icon:"fluent:send-28-filled"})])],-1)),Pr={key:4,class:"z-50 w-full flex flex-col justify-center items-center bg-[#EBE6DF] h-screen"},jr=re(()=>a("img",{class:"fixed rounded-xl overflow-hidden top-4 right-4 w-20 h-20 border-4 border-black/60",src:"/logo.png"},null,-1)),Ar=re(()=>a("h1",{class:"sm:text-6xl text-4xl font-brand font-bold mb-4"},"Welcome!",-1)),Ir={class:"sm:text-2xl text-xl font-brand font-bold mb-4 text-center"},Mr={class:"bg-black text-white rounded-full mx-2 px-3 p-2 sm:my-0"},Er={class:"w-full flex justify-center items-center py-8 px-8"},Rr={ref:"campaignList1",class:"campaignList border-2 z-50 rounded-xl shadow-xl max-h-[300px] overflow-hidden w-full max-w-md bg-white/50"},Nr=re(()=>a("p",{class:"text-left text-xl font-brand font-bold p-4 border-b bg-white sticky top-0"},"Active Campaigns",-1)),Lr={class:"px-4"},Wr={class:"py-2 flex justify-between items-center"},Br={class:"font-brand text-lg"},zr=["onClick"],Fr={class:"w-full grid grid-cols-2 gap-4 justify-center items-center max-w-sm"},Ur=re(()=>a("p",{class:"text-sm text-center py-2"},"New User?",-1)),Hr=re(()=>a("p",{class:"text-sm text-center py-2"},"Already got stamp?",-1));function qr(o,t,s,e,r,l){return w(),C("div",Uo,[e.gotStamp?(w(),C("div",{key:0,class:"w-screen h-screen fixed top-0 left-0 z-10",style:je(`background:${e.currentColor}20;`)},[a("div",Ho,[(w(),C(Pe,null,We(200,n=>a("div",{class:"pointer-events-none changing-text w-full aspect-square flex justify-center items-center text-8xl filter font-brand font-black opacity-20",style:je(`color:${e.currentColor};`)},ae(e.currentCharacter),5)),64))])],4)):V("",!0),D(e.ModalVue,{project_info:e.project_info,campaign_info:e.$selectedCampaign.value,onStamped:t[0]||(t[0]=n=>e.showStampedAnimation())},null,8,["project_info","campaign_info"]),D(e.NewStampModal,{onUpdate:t[1]||(t[1]=n=>e.afterWelcome())}),D(e.ConnectWallet),e.showReceipt?(w(),C("div",qo,[Vo,a("img",{id:"receiptImage",class:"w-full h-full z-20 rounded-xl object-cover",src:e.receiptImageData,alt:""},null,8,Ko),Jo])):V("",!0),e.showWelcome?(w(),C("div",Yo,[Go,a("p",Xo,ae(e.project_info?.token_name),1),Qo])):V("",!0),e.gotStamp?(w(),C("div",Zo,[a("div",er,[a("div",tr,[a("section",ar,[nr,a("div",or,[(w(!0),C(Pe,null,We(e.project_info?.campaigns,n=>(w(),C("div",rr,[a("p",sr,ae(n?.tag),1),a("button",{onClick:m=>e.showCampaignModalTrigger(n),style:je(`background:${e.currentColor};`),class:"text-sm rounded-md px-4 py-1 hover:scale-105 active:scale-90 duration-300"},"Join",12,lr)]))),256))])],512)]),ir,a("div",cr,[D(e.StampCircle,{class:"z-50",address:e.getAccount(e.config)?.address,name:e.$userData.value?.name},null,8,["address","name"]),a("button",{onClick:t[2]||(t[2]=n=>e.disconnectWallet()),class:"z-50 mt-8 px-4 py-2 rounded-full bg-red-100 text-lg font-brand border border-white hover:ring-2 hover:ring-red-500 hover:ring-offset-2 hover:bg-red-500 hover:text-white duration-300 text-red-500 active:scale-75"},"Disconnect")])]),a("div",dr,[a("div",ur,[a("div",vr,[a("div",fr,[D(e.DropdownMenu,null,{default:P(()=>[D(e.DropdownMenuTrigger,null,{default:P(()=>[mr]),_:1}),D(e.DropdownMenuContent,{class:"p-4 rounded-xl",align:"start"},{default:P(()=>[D(e.StampCircle,{address:e.getAccount(e.config)?.address,name:e.$userData.value?.name},null,8,["address","name"])]),_:1})]),_:1}),a("p",pr,ae(e.getAccount(e.config)?.address?.slice(0,6))+"..."+ae(e.getAccount(e.config)?.address?.slice(-4)),1)]),D(e.Button,{onClick:t[3]||(t[3]=n=>e.disconnectWallet()),class:"bg-red-100 text-red-500",variant:"ghost"},{default:P(()=>[De("Disconnect")]),_:1})]),D(e.Drawer,null,{default:P(()=>[D(e.DrawerTrigger,null,{default:P(()=>[a("button",gr,"View All Campaign ("+ae(e.project_info?.campaigns?.length)+")",1)]),_:1}),D(e.DrawerContent,null,{default:P(()=>[D(e.DrawerHeader,null,{default:P(()=>[D(e.DrawerTitle,null,{default:P(()=>[De("Active Campaign")]),_:1}),D(e.DrawerDescription,null,{default:P(()=>[De("active campaign.")]),_:1})]),_:1}),a("section",hr,[a("div",wr,[(w(!0),C(Pe,null,We(e.project_info?.campaigns,n=>(w(),C("div",br,[a("p",xr,ae(n?.tag),1),D(e.DrawerTrigger,null,{default:P(()=>[a("button",{onClick:m=>e.showCampaignModalTrigger(n),style:je(`background:${e.currentColor};`),class:"text-sm rounded-md px-4 py-1 hover:scale-105 active:scale-90 duration-300"},"Join",12,_r)]),_:2},1024)]))),256))])])]),_:1})]),_:1})]),a("div",yr,[a("div",Cr,"From "+ae(e.project_info?.token_name),1),a("div",Sr,[(w(!0),C(Pe,null,We(e.messages,(n,m)=>(w(),C("div",null,[a("div",{class:Ee([e.messages.length<=m&&n?.sender!==e.messages[m+1]?.sender?"messages":"flex flex-col",n?.sender==="me"?"mine":"yours"])},[n?.type=="text"?(w(),C("div",{key:0,class:Ee([n?.sender===e.messages[m+1]?.sender?"message":"message last"])},ae(n?.content),3)):n?.type=="attachment"?(w(),C("div",$r,[a("img",{src:n?.content},null,8,Dr)])):(w(),C("div",kr," Unable to load content. "))],2)]))),256)),a("div",Tr,null,512)])]),a("form",{id:"formEl",onSubmit:t[5]||(t[5]=st(n=>e.pushXmtpMessage(),["prevent"])),class:"w-full grid grid-cols-[1fr_3rem] items-center justify-center gap-2 pt-4"},[a("div",null,[D(e.Input,{modelValue:e.messageInput,"onUpdate:modelValue":t[4]||(t[4]=n=>e.messageInput=n),class:"h-12 rounded-full text-lg pl-4 placeholder:italic font-brand",placeholder:"Say Hi!"},null,8,["modelValue"])]),Or],32)])])):(w(),C("div",Pr,[jr,Ar,a("h1",Ir,[De(" To participate in events by "),a("div",Mr,ae(e.project_info?.token_name)+" on REMO",1),De(" please get a stamp. ")]),a("div",Er,[a("section",Rr,[Nr,a("div",Lr,[(w(!0),C(Pe,null,We(e.project_info?.campaigns,n=>(w(),C("div",Wr,[a("p",Br,ae(n?.tag),1),a("button",{onClick:m=>e.showCampaignModalTrigger(n),style:je(`background:${e.currentColor};`),class:"text-sm rounded-md px-4 py-1 hover:scale-105 active:scale-90 duration-300"},"Join",12,zr)]))),256))])],512)]),a("div",Fr,[a("div",null,[Ur,a("button",{onClick:t[6]||(t[6]=n=>e.showStampModal()),class:"bg-blue-500 w-full rounded-xl text-white py-4 font-brand font-semibold text-lg hover:ring-2 hover:ring-blue-500 hover:ring-offset-2 active:scale-75 duration-300"},"Get a Stamp (free)")]),a("div",null,[Hr,a("button",{onClick:t[7]||(t[7]=n=>e.showConnectWalletModal()),class:"bg-blue-50 w-full rounded-xl text-blue-500 py-4 font-brand font-semibold text-lg hover:ring-2 hover:ring-blue-500 hover:ring-offset-2 active:scale-75 duration-300"},"Connect Wallet")])])]))])}const fs=ve(Fo,[["render",qr],["__scopeId","data-v-9a8e9842"]]);export{fs as default};
