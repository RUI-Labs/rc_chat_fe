import{B as W}from"./index.DUM513om.js";import{c as g,m as _,h}from"./wagmiConfig.Chk1Y_fx.js";import{l as C,s as d,a as w,L as l,c as v,p as K,g as S}from"./getEthersSigner.DIrFHjWe.js";import{a as X,i as x,s as $,c as A,p as k,m as j}from"./index.SVBtah2_.js";import{_ as L}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{r as T,c as M,g as R,w as z}from"./watchConnections.CEVD3vQ5.js";import{g as b}from"./getAccount.CrAKNmNJ.js";import{d as D}from"./disconnect.fQnpZ0pp.js";import{r as m,o as B,a as J,c as N,t as q}from"./runtime-core.esm-bundler.C8n-v3-D.js";import"./utils.CFP4Y51R.js";import"./runtime-dom.esm-bundler.CkxCeCJQ.js";import"./getConnectorClient.CvN7nnx2.js";import"./inherits_browser.BGXtg88A.js";function F(u,a={}){let e;try{e=u.getClient(a)}catch{}return e}const P=X(null),G={__name:"Xmtpclient",setup(u,{expose:a}){a();const e=m(),n=m(),c=async()=>{let t=!1;try{t=await w(g),t=await t.provider.getSigner()}catch(r){console.log(r)}if(t)return t;setTimeout(async()=>{await c()},1e3)},s={env:"production",disablePersistenceEncryption:!0},p=async()=>{let t=!1,r=e.value;try{t=C(r),t&&await fetch("/api/keys.json",{method:"POST",body:JSON.stringify({address:r,keys:Buffer.from(t).toString("hex")})})}catch(o){console.log(o)}if(x()){if(!t){const o=S(),O=K(o),E=v({account:O,chain:_,transport:h()});t=await l.getKeys(E,{...s}),d(r,t)}}else if(!t){const o=await c();console.log("getting keys"),t=await l.getKeys(o,{...s}),d(r,t)}const i=await l.create(null,{...s,privateKeyOverride:t});i.registerCodec(new A),i.registerCodec(new k),console.log("XMTP initalized"),console.log(i),P.set(i)},f=async()=>{try{let t=b(g);t.address&&(e.value=t.address,t.address&&await p())}catch{}};B(async()=>{await T(g),await f()});const y={address:e,connectors:n,getSigner:c,clientOptions:s,initXmtp:p,checkAccount:f,onMounted:B,ref:m,get Button(){return W},get connect(){return M},get reconnect(){return T},get getAccount(){return b},get disconnect(){return D},get getConnectors(){return R},get watchConnections(){return z},get getClient(){return F},get config(){return g},get loadKeys(){return C},get storeKeys(){return d},get getEthersSigner(){return w},get Client(){return l},get $xmtpClient(){return P},get isSmartWalletConnected(){return x},get ContentTypeAttachment(){return $},get AttachmentCodec(){return A},get RemoteAttachmentCodec(){return k},get ContentTypeRemoteAttachment(){return j},get mainnet(){return _},get createWalletClient(){return v},get http(){return h},get privateKeyToAccount(){return K},get generatePrivateKey(){return S}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},H={class:"text-white mr-2"};function I(u,a,e,n,c,s){return J(),N("div",H,q(n.address?.substring(0,6)+"..."+n.address?.substring(n.address?.length-4)),1)}const it=L(G,[["render",I]]);export{it as default};
